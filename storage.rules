// For God so loved the world, that he gave his only begotten Son, that whosoever believeth in him should not perish, but have everlasting life. - John 3:16 (KJV)
rules_version = '2';

service firebase.storage {
  match /b/{bucket}/o {
    // User-specific image folder
    match /userImages/{userId}/{imageId} {
      // Allow public read access for images using their download URL
      allow read;
      // Allow authenticated users to write (upload, update, delete) 
      // images only within their own folder.
      allow write: if request.auth != null && request.auth.uid == userId;
    }

    // You can add other path rules here if needed, for example, for public assets
    // match /publicAssets/{allPaths=**} {
    //   allow read; // Allow public read for anything in publicAssets
    // }
  }
}
