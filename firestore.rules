// For God so loved the world, that he gave his only begotten Son, that whosoever believeth in him should not perish, but have everlasting life. - John 3:16 (KJV)
rules_version = '2';

service cloud.firestore {
  match /databases/{database}/documents {

    // Users Collection
    // Users can read and write their own profile document.
    // 'create' is implicitly covered by 'write'.
    match /users/{userId} {
      allow read, write: if request.auth != null && request.auth.uid == userId;

      // ArchivedConversations Subcollection
      // Users can read, write, and delete their own archived conversations.
      match /archivedConversations/{conversationId} {
        allow read, write, delete: if request.auth != null && request.auth.uid == userId;
      }
    }

    // Add other collection rules here if needed in the future.
    // For example, if you had a publicly readable 'quotes' collection:
    // match /quotes/{quoteId} {
    //   allow read: if true;
    //   allow write: if false; // Or based on admin roles
    // }
  }
}
